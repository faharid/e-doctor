<div class="container" [ngClass]="{stepperUp : stepCounter == 3 || stepCounter == 4}">
  <div class="jumbotron" *ngIf="stepCounter !== 3 && stepCounter !== 4">
    <h1>Make a doctor's appointment in 4 simple steps</h1>
  </div>
  <div class="stepper">
    <ul>
      <li (click)="stepCounter = 1"><span class="numberCircle" [ngClass]="{currentStep : stepCounter==1}">1</span>
        <div class="stepperLabel">
          <span class="label" [ngClass]="{currentStepLabel : stepCounter==1}">Pick a Specialty</span>
          <span class="subLabel" *ngIf="stepCounter !== 1">{{specialty}}</span>
        </div>
      </li>
      <li (click)="stepCounter = 2"><span class="numberCircle" [ngClass]="{currentStep : stepCounter==2}">2</span>
        <div class="stepperLabel">
          <span class="label" [ngClass]="{currentStepLabel : stepCounter==2}">Pick a City</span>
          <span class="subLabel" *ngIf="stepCounter !== 2 && stepCounter !== 1">{{city}}</span>
        </div>
      </li>
      <li (click)="stepCounter = 3"><span class="numberCircle"
                                          [ngClass]="{currentStep : stepCounter==3}">3</span><span
        class="label" [ngClass]="{currentStepLabel : stepCounter==3}">Choose a Doctor</span></li>
      <li (click)="stepCounter = 4"><span class="numberCircle"
                                          [ngClass]="{currentStep : stepCounter==4}">4</span><span
        class="label" [ngClass]="{currentStepLabel : stepCounter==4}">Make an Appointment</span>
      </li>
    </ul>
  </div>

  <div class="form" *ngIf="stepCounter == 1">
    <mat-form-field>
      <mat-label>Specialty</mat-label>
      <mat-select name="specialty" [(ngModel)]="specialty" (selectionChange)="pickSpecialty(specialty)">
        <mat-option *ngFor="let specialty of uniqueCities()" [value]="specialty">
          {{specialty}}
        </mat-option>
      </mat-select>
    </mat-form-field>
    <div class="formButtons">
      <button class="actionBtn" (click)="stepCounter = 2">Next</button>
    </div>
  </div>

  <div class="form" *ngIf="stepCounter == 2">
    <mat-form-field>
      <mat-label>City</mat-label>
      <mat-select name="city" [(ngModel)]="city" (selectionChange)="pickCity(specialty,city)">
        <mat-option *ngFor="let city of cities" [value]="city">
          {{city}}
        </mat-option>
      </mat-select>
    </mat-form-field>
    <div class="formButtons">
      <button class="actionBtn" (click)="stepCounter = 1">Back</button>
      <button class="actionBtn" (click)="stepCounter = 3">Next</button>
    </div>
  </div>

  <div *ngIf="stepCounter == 3" class="chooseDoctor">
    <div class="form" id="thirdForm">
      <div class="card" *ngFor="let doctor of doctors; let i = index"
           (click)="selectedDoctorDetails = doctor; calendarClick(i)">
        <div class="cardTitle">
          <div class="cardBasic">
            <img class="avatar" [src]="imgPath" *ngIf="doctor.profilePic"
                 alt="Avatar">
            <img class="avatar" src="https://forums.roku.com/styles/canvas/theme/images/no_avatar.jpg"
                 *ngIf="!doctor.profilePic"
                 alt="Avatar">
            <div class="cardName">
              <h3>{{doctor.firstName}} {{doctor.lastName}}</h3>
              <h5><span class="rating">Rating:
     <span class="stars-container stars-{{getRating(doctor)}}">★★★★★</span>
</span> ({{doctor.rates.length}})</h5>
            </div>
          </div>
          <div class="cardBtn">
            <fa-icon icon="calendar-alt" id="calendarIcon"></fa-icon>
            <h5 id="calendarLabel">Check Calendar</h5>
          </div>
        </div>

        <div *ngIf="selectedDoctor === i" class="cardDetails">
          <!--          <h5>{{doctor.city}}</h5>-->
        </div>
      </div>

      <div class="underCardBtn" *ngIf="!hourPicked">
        <button class="actionBtn" (click)="stepCounter = 2">Back</button>
      </div>
    </div>

    <div *ngIf="!calendarClicked && !datePicked" class="emptyDiv"></div>

    <div *ngIf="calendarClicked && !datePicked" class="calendar">
      <mat-form-field style="width:1px;visibility:hidden;">
        <input matInput [matDatepicker]="datePicker" (click)="datePicker.open()" (dateChange)="addEvent($event)">
        <mat-datepicker #datePicker [opened]="true"></mat-datepicker>
      </mat-form-field>
    </div>
    <div *ngIf="datePicked" class="timePicker">
      <h3 class="timePickerLabel">{{date}}</h3>
      <h4 class="timePickerLabel">Available hours:</h4>

      <mat-form-field>
        <mat-label id="hourLabel">Choose An Hour</mat-label>
        <mat-select (selectionChange)="pickHour(hour)" [(ngModel)]="hour">
          <mat-option *ngFor="let hour of avHours" [value]="hour">{{hour}}</mat-option>
        </mat-select>
      </mat-form-field>
      <div class="formButtons" *ngIf="hourPicked">
        <button class="actionBtn" (click)="stepCounter = 2">Back</button>
        <button class="actionBtn" (click)="stepCounter = 4">Next</button>
      </div>
    </div>
  </div>

  <div class="wrapper">
    <div class="jumbotron" *ngIf="stepCounter === 4">
      <h1 *ngIf="!requestSent" id="confirmRequest">Do you want to send a request?</h1>
      <alert></alert>
    </div>

    <div *ngIf="stepCounter === 4 && selectedDoctor !== undefined" class="confirm">
      <div class="card">
        <div class="cardTitle">
          <div class="cardBasic">
            <img class="avatar" [src]="imgPath" *ngIf="currentUser?.profilePic"
                 alt="Avatar">
            <img class="avatar" src="https://forums.roku.com/styles/canvas/theme/images/no_avatar.jpg"
                 *ngIf="currentUser && !currentUser.profilePic"
                 alt="Avatar">
            <div class="cardName">
              <h3>{{selectedDoctorDetails.firstName}} {{selectedDoctorDetails.lastName}}</h3>
              <h5 id="specialty">{{selectedDoctorDetails.specialty}}</h5>
            </div>
          </div>
          <div class="cardBtn">
            <h3>{{date}}, {{hour}}</h3>
          </div>
        </div>
      </div>
      <div class="finalBtn" *ngIf="!requestSent">
        <button id="confirmBtn" (click)="sendRequest()">Send a request</button>
        <button id="cancelBtn" (click)="stepCounter = 3">Cancel</button>
      </div>
      <div class="final Btn" *ngIf="requestSent">

      </div>
    </div>

    <!--[ngClass]="{cardLeft : calendarClicked == true}"-->
  </div>
</div>


<!--<div class="indicator" (click)="readNotifications(); drop=!drop">-->
<!--  <a href="javascript:void(0)" class="indicatorLink">-->
<!--    <span class="notification" *ngIf="notifications > 0">{{notifications}}</span>-->
<!--    <fa-icon icon="bell" class="indicator"></fa-icon>-->
<!--  </a>-->
<!--  <div class="dropdownContent" *ngIf="drop">-->
<!--    <ul *ngFor="let visit of currentUser.visits">-->
<!--      <li>{{visit}}</li>-->
<!--    </ul>-->
<!--  </div>-->
